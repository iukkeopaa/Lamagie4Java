前面十几篇文章我们讲解完了分布式锁的全部内容。从分布式锁是什么开始到如何设计一个分布式锁结束，还是那句话：**授人以鱼不如授人以渔**。所以我的写作风格大多采取的是先讲解设计思想，然后在带着思想深入到源码剖析，我们本文就对本小册做个大总结，我会对每一篇都做个总结，大家可以边看边想这些问题你会不会、这些知识你有没有掌握。

**第一篇：**

第一篇我主要想分享两句话：

* 学思想，别学源码！
* 多给自己加油打气，通过自己打破“35岁魔咒”。

**第二篇：**

第二篇我主要想分享的是一些学习方法论（“鸡汤”），以及如何稳住心态，如何持续学习。这里我也想分享三句话：

* 只有弱者才会质疑自己。
* 时间用在刀刃上。
* 每天制定学习计划（时间+目标），然后去执行。睡前大脑里回忆今天已做以及明天要做。

**第三篇：**

第三篇属于分布式锁的开篇，主要讲解了以下几个知识点，大家也可以想一下这些问题自己会不会，有没有掌握。

* 分布式锁是什么？有什么用？

* 分布式锁的核心必备东西有哪些？

* 设计一个分布式锁的常见方式有哪些？主流的有哪些？

* 分布式锁的应用场景有哪些？

**第四篇：**

第四篇算是分布式锁真正实战的开篇，主要讲解了MySQL实现分布式锁的核心原理以及核心代码的设计与实现。大家现在也可以想一个问题：

MySQL如何实现分布式锁？可以自己内心想一下核心设计的要点以及有什么利弊。

**第五篇：**

第五篇我们讲解了Redis 实现分布式锁的核心原理以及利弊，大家可以想如下几个问题：

* Redis如何实现一把分布式锁？需要考虑哪些要点？

* Redis都有哪些实现分布式锁的方式？各有有什么优缺点？

**第六篇：**

这一篇我们初入Redisson，学习了Redisson是如何利用Redis来实现一把分布式锁的。核心就是一段lua脚本，但是大家可以想几个问题：

* Redisson是如何实现加锁的？
* Redisson是如何实现锁重入的？
* Redisson是如何实现锁互斥的？
* Redisson是如何实现释放锁的？

虽然都是lua，但是大家可以想一下这几个问题。当然了还差一个核心问题：WatchDog是如何实现的？这个我们第七篇单独拿出来讲解哒。

**第七篇：**

第七篇知识点很明确：那就是WatchDog 到底咋实现的？这里面还是有细节的，不是一句话：lua实现的。而是它有很多巧妙的设计，比如啥时候续期？续期的时候每次都开一个线程吗？大家可以想一下，实在不行再回头看一遍。

**第八篇：**

第八篇开始就是我们进阶篇的内容了，这一篇我们主要讲解了利用Redis设计一个分布式公平锁的核心思想以及核心源码。大家可以想以下几个问题：

* 什么是公平锁？什么是非公平锁？
* 如何设计公平锁？该怎么存储，该怎么设计？

**第九篇、第十篇：**

这两篇我们讲解了如何用Redis 设计一个分布式读写锁的核心设计原理以及核心源码。这两篇内容很多，大家想一下如下几个问题是否学明白：

* 读锁如何设计、写锁如何设计？
* 读读共享、读写互斥、写写互斥，三个特性如何设计？
* 读锁/写锁如何加锁和解锁？

**第十一篇、第十二篇：**

这两篇我们讲解了红锁RedLock的特点是什么？原理是什么？Redisson里的RedLock是如何设计的？（这里巧妙的用了一个设计模式：模板方法模式。大家可以趁机回忆一波。）

**第十三篇：**

这一篇是我们Zookeeper实现分布式锁的核心篇，主要讲解了Zookeeper是如何实现分布式锁的，怎么设计的，用的什么类型的节点？（临时顺序节点），为什么要用这个节点？Zookeeper实现分布式锁有什么优缺点？加锁解锁流程是怎样的？怎么做到互斥的？等等一系列问题，Zookeeper这篇内容很干，很值得学习。

**第十四篇、第十五篇：**

这两篇作为补充篇的内容，主要讲解了两个知识点：分布式的CountDownLatch和Semaphore。也恰巧可以用信号量Semaphore来实现分布式限流工具，大家可以想一想如何用Redis来实现分布式的CountDownLatch和Semaphore，以及如何用Zookeeper来实现分布式的CountDownLatch和Semaphore。这也是我们第十四篇和第十五篇的作业之一。

**最后，大家肯定很关心一个话题：什么时候用Redis做分布式锁？什么时候用Zookeeper做分布式锁？到底用不用红锁？**

这里我说下个人看法：

我个人看情况，如果你公司并发很高，要求高性能，那我建议普通的Redis做分布式锁就好了，为什么不建议Zookeeper？因为Zookeeper性能不如Redis。那为什么不用红锁？因为红锁性能不好呀，红锁你要和N个Redis节点进行建立链接且和N个Redis进行写操作。所以我个人看法如下：

* 追求高性能，用Redis普通分布式锁

* 追求高安全性，高一致性，不追求高性能。用Zookeeper。
* 追求较高安全性，较高一致性，容忍极小概率的问题。那建议RedLock。
* 如果企业内没用Zookeeper，就用了Redis，那建议没必要单独搭建一套Zookeeper，就用Redis实现分布式锁或者RedLock就好了。
* 大多数企业都会用Redis，中小型企业并发没那么大，所以就选普通分布式锁/RedLock就好了。
* 至于一些高级特性，比如读写锁、公平锁等就看个人业务，你要保证公平，那肯定就用公平锁了。如果你写少读多，那就可以考虑读写锁。

最后还用了一个图总结了下本小册能学到哪些知识点，大家可以查漏补缺。

![分布式锁目录.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a420ba3c6d842eb8f59d756daf06a42~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=1548&h=4995&s=760872&e=png&a=1&b=f2f2f2)